<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Compta Business Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: sans-serif; background: #F8FAFC; margin: 0; padding-bottom: 90px; }
        .page { display: none; padding: 20px; animation: fadeIn 0.3s; }
        .page.active { display: block !important; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .card { background: white; border-radius: 20px; padding: 20px; border: 1px solid #E2E8F0; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); margin-bottom: 20px; }
        input, select { width: 100%; padding: 14px; border: 1px solid #E2E8F0; border-radius: 12px; margin-bottom: 15px; outline: none; }
        .btn-blue { background: #2563EB; color: white; width: 100%; padding: 16px; border-radius: 15px; font-weight: bold; border: none; cursor: pointer; }
        
        nav { position: fixed; bottom: 0; left: 0; right: 0; height: 80px; background: white; border-top: 1px solid #E2E8F0; display: flex; z-index: 1000; }
        .nav-btn { flex: 1; border: none; background: none; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 10px; color: #94A3B8; font-weight: bold; }
        .nav-btn.active { color: #2563EB; }
    </style>
</head>
<body onload="checkFirstStart()">

    <div id="setup-screen" class="fixed inset-0 bg-white z-[2000] p-6 overflow-y-auto hidden">
        <h2 class="text-3xl font-black text-center mt-10 mb-2">Bienvenue üöÄ</h2>
        <p class="text-center text-slate-500 mb-8">Configurez votre profil</p>
        <div class="card">
            <label class="text-[10px] font-bold text-slate-400 uppercase">Logo (Cliquez pour ajouter)</label>
            <div class="flex justify-center my-4">
                <div onclick="document.getElementById('fileInput').click()" class="w-20 h-20 bg-slate-100 rounded-2xl flex items-center justify-center border-2 border-dashed border-slate-300 overflow-hidden">
                    <img id="logo-preview" class="hidden w-full h-full object-cover">
                    <span id="logo-plus" class="text-2xl text-slate-400">+</span>
                </div>
                <input type="file" id="fileInput" class="hidden" accept="image/*" onchange="handleLogo(this)">
            </div>
            <input type="text" id="setup-name" placeholder="Nom de la Boutique">
            <input type="tel" id="setup-tel" placeholder="T√©l√©phone (+226...)">
            <select id="setup-currency"><option value="FCFA">FCFA</option><option value="USD">USD ($)</option></select>
            <button onclick="finirInscription()" class="btn-blue">COMMENCER</button>
        </div>
    </div>

    <header class="bg-white p-4 border-b flex justify-between items-center sticky top-0 z-50">
        <div class="flex items-center gap-2">
            <img id="header-logo" class="w-8 h-8 rounded-lg hidden object-cover">
            <b id="header-name" class="text-slate-800">Business</b>
        </div>
        <span id="status-badge" class="bg-red-100 text-red-600 text-[10px] px-2 py-1 rounded-full font-bold">GRATUIT</span>
    </header>

    <div id="all-pages">
        <div id="page-home" class="page active">
            <div class="bg-slate-900 p-8 rounded-[2rem] text-white shadow-xl mb-6">
                <p class="text-[10px] uppercase text-slate-400 font-bold">Profit Total</p>
                <h2 class="text-4xl font-black mt-1"><span id="dash-profit">0</span> <small class="text-sm font-normal user-cur">FCFA</small></h2>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div onclick="showPage('stock')" class="card text-center py-8">üì¶<br><b class="text-xs uppercase mt-2 block">Stock</b></div>
                <div onclick="showPage('facture')" class="card text-center py-8">üìÑ<br><b class="text-xs uppercase mt-2 block">Factures</b></div>
            </div>
        </div>

        <div id="page-stock" class="page">
            <h2 class="text-2xl font-black mb-6">üì¶ Mon Stock</h2>
            <div class="card">
                <input type="text" id="prod-name" placeholder="Nom du produit">
                <input type="number" id="prod-price" placeholder="Prix de vente">
                <button onclick="ajouterProduit()" class="btn-blue">AJOUTER</button>
            </div>
            <div id="stock-list" class="space-y-3"></div>
        </div>

        <div id="page-facture" class="page">
            <h2 class="text-2xl font-black mb-6">üìÑ Factures</h2>
            <div class="card text-center py-20 text-slate-400">Aucune facture.</div>
        </div>

        <div id="page-settings" class="page">
            <h2 class="text-2xl font-black mb-6">‚öôÔ∏è Param√®tres</h2>
            <div class="card">
                <input type="text" id="edit-name" placeholder="Nom">
                <input type="tel" id="edit-tel" placeholder="T√©l√©phone">
                <button onclick="updateProfil()" class="btn-blue bg-slate-800">METTRE √Ä JOUR</button>
            </div>
            <p class="text-center text-[10px] text-slate-400 uppercase font-bold">ID Appareil : <span id="uid-display"></span></p>
        </div>

        <div id="page-premium" class="page">
            <div class="card text-center">
                <div class="text-4xl mb-4">‚≠ê</div>
                <h2 class="text-2xl font-black">Abonnement Pro</h2>
